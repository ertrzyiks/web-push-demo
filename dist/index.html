<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <title>Web Notifications Demo</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
<style type="text/css">a,abbr,acronym,address,applet,article,aside,audio,b,big,blockquote,body,canvas,caption,center,cite,code,dd,del,details,dfn,div,dl,dt,em,embed,fieldset,figcaption,figure,footer,form,h1,h2,h3,h4,h5,h6,header,hgroup,html,i,iframe,img,ins,kbd,label,legend,li,mark,menu,nav,object,ol,output,p,pre,q,ruby,s,samp,section,small,span,strike,strong,sub,summary,sup,table,tbody,td,tfoot,th,thead,time,tr,tt,u,ul,var,video{margin:0;padding:0;border:0;font-size:100%;font:inherit;vertical-align:baseline}article,aside,details,figcaption,figure,footer,header,hgroup,menu,nav,section{display:block}body{line-height:1}ol,ul{list-style:none}blockquote,q{quotes:none}blockquote:after,blockquote:before,q:after,q:before{content:"";content:none}table{border-collapse:collapse;border-spacing:0}button{display:inline-block;border:none;color:#fff;text-decoration:none;background-color:#69ca52;padding:15px 45px;font-size:13px;text-transform:uppercase;font-weight:600;letter-spacing:3px;border-radius:2px;text-align:center;position:relative;outline:none;transition:background-color .1s ease;cursor:pointer}button:after{transition:background-color .2s ease;position:absolute;content:"";height:4px;bottom:0;width:100%;background-color:#0a1607;opacity:.18;border-bottom-left-radius:2px;border-bottom-right-radius:2px;left:0}button:focus,button:hover{text-decoration:none;color:#fff}button:hover{background-color:#7ad066}button:hover:after{opacity:.22}button:active{background-color:#58c43e}button:active:after{opacity:.32}.card{margin:1em 0;border:1px solid #b1bdd0;padding:1em;transition:background-color .2s}.card.service-worker{color:#333;background-color:#eee}.card.service-worker[data-status=unsupported]{background-color:#f99b9b}.card.service-worker[data-status=installing],.card.service-worker[data-status=waiting]{background-color:#f7f78c}.card.service-worker[data-status=activated]{background-color:#daf7bb}.card.notification{color:#333;background-color:#eee}.card.notification[data-status=denied],.card.notification[data-status=unsupported]{background-color:#f99b9b}.card.notification[data-status=default]{background-color:#f7f78c}.card.notification[data-status=granted]{background-color:#daf7bb}header{height:50px;background-color:#b1bdd0}h1{padding:1em 0;font-size:32px}h3{font-size:24px}p{padding:1em 0}.main{max-width:1000px;margin:0 auto;padding:0 1em}.action-button{display:flex;justify-content:center;padding:3em 0}.row{display:grid;grid-template-columns:1fr 1fr;grid-column-gap:32px}.item{flex:1}</style></head>
<body>
  <div class="container main">
    <h1>Push Notification API Demo</h1>

    <p>
      This is a demo of <a href="https://developer.mozilla.org/en-US/docs/Web/API/Push_API">Push API</a>.
    </p>

    <div class="action-button">
      <button id="schedule">Send after 5 seconds</button>
    </div>

    <div class="row">
      <div class="card service-worker" id="service-worker-status" data-status="unknown">
        <h3>Service worker</h3>
        <p></p>
      </div>

      <div class="card notification" id="notification-status">
        <h3>Notifications</h3>
        <p></p>
      </div>
    </div>
  </div>
<script type="text/javascript">!function(t){var e={};function n(r){if(e[r])return e[r].exports;var i=e[r]={i:r,l:!1,exports:{}};return t[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)n.d(r,i,function(e){return t[e]}.bind(null,i));return r},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=4)}([function(t,e,n){},function(t,e,n){(function(e){var n="Expected a function",r=NaN,i="[object Symbol]",o=/^\s+|\s+$/g,c=/^[-+]0x[0-9a-f]+$/i,u=/^0b[01]+$/i,a=/^0o[0-7]+$/i,s=parseInt,f="object"==typeof e&&e&&e.Object===Object&&e,l="object"==typeof self&&self&&self.Object===Object&&self,d=f||l||Function("return this")(),p=Object.prototype.toString,v=Math.max,b=Math.min,h=function(){return d.Date.now()};function y(t){var e=typeof t;return!!t&&("object"==e||"function"==e)}function g(t){if("number"==typeof t)return t;if(function(t){return"symbol"==typeof t||function(t){return!!t&&"object"==typeof t}(t)&&p.call(t)==i}(t))return r;if(y(t)){var e="function"==typeof t.valueOf?t.valueOf():t;t=y(e)?e+"":e}if("string"!=typeof t)return 0===t?t:+t;t=t.replace(o,"");var n=u.test(t);return n||a.test(t)?s(t.slice(2),n?2:8):c.test(t)?r:+t}t.exports=function(t,e,r){var i,o,c,u,a,s,f=0,l=!1,d=!1,p=!0;if("function"!=typeof t)throw new TypeError(n);function m(e){var n=i,r=o;return i=o=void 0,f=e,u=t.apply(r,n)}function w(t){var n=t-s;return void 0===s||n>=e||n<0||d&&t-f>=c}function j(){var t=h();if(w(t))return O(t);a=setTimeout(j,function(t){var n=e-(t-s);return d?b(n,c-(t-f)):n}(t))}function O(t){return a=void 0,p&&i?m(t):(i=o=void 0,u)}function x(){var t=h(),n=w(t);if(i=arguments,o=this,s=t,n){if(void 0===a)return function(t){return f=t,a=setTimeout(j,e),l?m(t):u}(s);if(d)return a=setTimeout(j,e),m(s)}return void 0===a&&(a=setTimeout(j,e)),u}return e=g(e)||0,y(r)&&(l=!!r.leading,c=(d="maxWait"in r)?v(g(r.maxWait)||0,e):c,p="trailing"in r?!!r.trailing:p),x.cancel=function(){void 0!==a&&clearTimeout(a),f=0,i=s=o=a=void 0},x.flush=function(){return void 0===a?u:O(h())},x}}).call(this,n(2))},function(t,e){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(t){"object"==typeof window&&(n=window)}t.exports=n},,function(t,e,n){"use strict";n.r(e);n(0);var r=n(1);function i(t,e,n){switch(t.setAttribute("data-status",n),n){case"installing":e.innerText="Installing ü§ûüèº";break;case"activated":e.innerText="Activated üëçüèº";break;case"unsupported":e.innerHTML='Not supported in this browser. Pick from <a href="https://caniuse.com/#feat=serviceworkers">the list</a> one which does.';break;default:e.innerText=n}}function o(t,e,n){switch(t.setAttribute("data-status",n),n){case"granted":e.innerText="Permission granted üëçüèº";break;case"denied":e.innerText="Permission denied üëéüèº";break;case"default":e.innerText="Accept notifications when prompted";break;case"unsupported":e.innerHTML='Not supported in this browser. Pick from <a href="https://caniuse.com/#feat=serviceworkers">the list</a> one which does.';break;default:e.innerText=n}}var c,u=function(t){for(var e=(t+"=".repeat((4-t.length%4)%4)).replace(/-/g,"+").replace(/_/g,"/"),n=window.atob(e),r=new Uint8Array(n.length),i=0;i<n.length;++i)r[i]=n.charCodeAt(i);return r}("BOg1fyRScY182dIv2Mlb6KdJtCX5Fa79LNZAfT8190rMq_RitmnlO1gaYpldjdUgNkAKccosiN1RcIwORHvqcxA");navigator.serviceWorker.register("worker.js").then(function(t){var e,n;!function(t,e){var n,o=t.querySelector("p:last-child"),c=r(function(e){i(t,o,e)},700);"serviceWorker"in navigator?(e.installing?n=e.installing:e.waiting?n=e.waiting:e.active&&(n=e.active),n&&(i(t,o,n.state),n.addEventListener("statechange",function(t){return c(t.target.state)}))):c("unsupported")}(document.querySelector("#service-worker-status"),t),e=document.querySelector("#notification-status"),n=e.querySelector("p:last-child"),o(e,n,Notification.permission),c=function(){return o(e,n,Notification.permission)}}),document.querySelector("#schedule").addEventListener("click",function(){navigator.serviceWorker.ready.then(function(t){return t.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:u})}).then(function(t){return c&&c(),fetch("/push",{method:"POST",body:JSON.stringify(t.toJSON()),headers:{"Content-Type":"application/json"}}).then(function(t){return t.json()})}).catch(function(t){c&&c()})})}]);</script></body>
</html>
